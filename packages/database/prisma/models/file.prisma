// schema.prisma

enum FileStatus {
    PENDING
    ACTIVE
    FAILED
}

enum FileAccessType {
    PRIVATE
    PUBLIC
}

model File {
    id           String         @id @default(uuid()) @db.Uuid
    key          String         @unique
    bucket       String?
    mimeType     String
    accessType   FileAccessType @default(PRIVATE)
    originalName String
    size         Int            @default(0)
    status       FileStatus     @default(PENDING)
    metadata     Json?
    createdAt    DateTime       @default(now())
    updatedAt    DateTime       @updatedAt
    orphanedAt   DateTime?

    references FileReference[]

    uploaderId String @db.Uuid
    uploader   User   @relation(fields: [uploaderId], references: [id], onDelete: Cascade)

    @@index([createdAt])
}
